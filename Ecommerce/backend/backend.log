nohup: ignoring input

> cms-backend@1.0.0 dev
> ts-node src/index.ts

Executing (default): SELECT value FROM settings WHERE namespace = 'email'
Executing (default): SELECT 1+1 AS result
Executing (default): SELECT id FROM users WHERE role = 'owner' LIMIT 1
App is ready
Server running on port 3011
Executing (default): SELECT
        s.id,
        s.title,
        s.description,
        s.button_text,
        s.button_link,
        s.order_index,
        s.is_active,
        COALESCE(a.cdn_url, a.url, s.image_url) AS image_url
      FROM sliders s
      LEFT JOIN assets a ON s.image_id = a.id
      WHERE s.is_active = TRUE
      ORDER BY s.order_index ASC, s.created_at DESC
      LIMIT 5
Executing (default): SELECT id, title, subtitle, icon_key, icon_color, icon_background, sort_order
      FROM value_props
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        c.id,
        c.name,
        c.slug,
        c.description,
        COALESCE(a.cdn_url, a.url) AS image_url
      FROM product_categories c
      LEFT JOIN assets a ON c.image_id = a.id
      WHERE c.is_featured = TRUE
      ORDER BY c.updated_at DESC, c.created_at DESC
      LIMIT 6
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.price,
        p.compare_price,
        p.stock,
        p.published_at,
        COALESCE(a.cdn_url, a.url) AS image_url,
        AVG(pr.rating) AS average_rating,
        COUNT(pr.id) AS review_count
      FROM products p
      LEFT JOIN assets a ON p.thumbnail_id = a.id
      LEFT JOIN product_reviews pr ON pr.product_id = p.id AND pr.status = 'approved'
      WHERE p.status = 'published' AND p.is_best_seller = TRUE
      GROUP BY
        p.id, p.name, p.slug, p.price, p.compare_price, p.stock, p.published_at, a.cdn_url, a.url
      ORDER BY p.published_at DESC NULLS LAST, p.updated_at DESC
      LIMIT 6
Executing (default): SELECT
        b.id,
        b.name,
        b.slug,
        b.description,
        COALESCE(a.cdn_url, a.url) AS logo_url
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      WHERE b.is_featured = TRUE
      ORDER BY b.updated_at DESC, b.created_at DESC
      LIMIT 6
Executing (default): SELECT id, customer_name, customer_title, customer_initials, testimonial_text, rating, is_featured, sort_order
      FROM testimonials
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT value
        FROM settings
        WHERE namespace = 'homepage_metrics'
        LIMIT 1
Executing (default): SELECT
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        COALESCE(p.read_time, p.content -> 'meta' ->> 'readTime', '') AS read_time,
        p.content -> 'meta' ->> 'category' AS category,
        COALESCE(p.content -> 'meta' ->> 'imageUrl', a.cdn_url, a.url) AS raw_image_url,
        STRING_AGG(DISTINCT t.name, ' & ') FILTER (WHERE t.name IS NOT NULL) AS topic_names,
        p.published_at
      FROM posts p
      LEFT JOIN post_topics pt ON pt.post_id = p.id
      LEFT JOIN topics t ON t.id = pt.topic_id
      LEFT JOIN assets a ON a.id = p.cover_asset_id
      WHERE p.status = 'published'
      GROUP BY
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        p.read_time,
        p.content,
        p.published_at,
        a.cdn_url,
        a.url
      ORDER BY p.published_at DESC NULLS LAST, p.created_at DESC
      LIMIT 4
Executing (default): SELECT 
        ml.*,
        COUNT(mi.id) as item_count
      FROM menu_locations ml
      LEFT JOIN menu_items mi ON ml.id = mi.menu_location_id
      GROUP BY ml.id
      ORDER BY ml.created_at DESC
Executing (default): SELECT id, title, subtitle, icon_key, icon_color, icon_background, sort_order
      FROM value_props
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        b.id,
        b.name,
        b.slug,
        b.description,
        COALESCE(a.cdn_url, a.url) AS logo_url
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      WHERE b.is_featured = TRUE
      ORDER BY b.updated_at DESC, b.created_at DESC
      LIMIT 6
Executing (default): SELECT
        c.id,
        c.name,
        c.slug,
        c.description,
        COALESCE(a.cdn_url, a.url) AS image_url
      FROM product_categories c
      LEFT JOIN assets a ON c.image_id = a.id
      WHERE c.is_featured = TRUE
      ORDER BY c.updated_at DESC, c.created_at DESC
      LIMIT 6
Executing (default): SELECT
        s.id,
        s.title,
        s.description,
        s.button_text,
        s.button_link,
        s.order_index,
        s.is_active,
        COALESCE(a.cdn_url, a.url, s.image_url) AS image_url
      FROM sliders s
      LEFT JOIN assets a ON s.image_id = a.id
      WHERE s.is_active = TRUE
      ORDER BY s.order_index ASC, s.created_at DESC
      LIMIT 5
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.price,
        p.compare_price,
        p.stock,
        p.published_at,
        COALESCE(a.cdn_url, a.url) AS image_url,
        AVG(pr.rating) AS average_rating,
        COUNT(pr.id) AS review_count
      FROM products p
      LEFT JOIN assets a ON p.thumbnail_id = a.id
      LEFT JOIN product_reviews pr ON pr.product_id = p.id AND pr.status = 'approved'
      WHERE p.status = 'published' AND p.is_best_seller = TRUE
      GROUP BY
        p.id, p.name, p.slug, p.price, p.compare_price, p.stock, p.published_at, a.cdn_url, a.url
      ORDER BY p.published_at DESC NULLS LAST, p.updated_at DESC
      LIMIT 6
Executing (default): SELECT value
        FROM settings
        WHERE namespace = 'homepage_metrics'
        LIMIT 1
Executing (default): SELECT id, customer_name, customer_title, customer_initials, testimonial_text, rating, is_featured, sort_order
      FROM testimonials
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        COALESCE(p.read_time, p.content -> 'meta' ->> 'readTime', '') AS read_time,
        p.content -> 'meta' ->> 'category' AS category,
        COALESCE(p.content -> 'meta' ->> 'imageUrl', a.cdn_url, a.url) AS raw_image_url,
        STRING_AGG(DISTINCT t.name, ' & ') FILTER (WHERE t.name IS NOT NULL) AS topic_names,
        p.published_at
      FROM posts p
      LEFT JOIN post_topics pt ON pt.post_id = p.id
      LEFT JOIN topics t ON t.id = pt.topic_id
      LEFT JOIN assets a ON a.id = p.cover_asset_id
      WHERE p.status = 'published'
      GROUP BY
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        p.read_time,
        p.content,
        p.published_at,
        a.cdn_url,
        a.url
      ORDER BY p.published_at DESC NULLS LAST, p.created_at DESC
      LIMIT 4
Executing (default): SELECT 
        ml.*,
        COUNT(mi.id) as item_count
      FROM menu_locations ml
      LEFT JOIN menu_items mi ON ml.id = mi.menu_location_id
      GROUP BY ml.id
      ORDER BY ml.created_at DESC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        s.id,
        s.title,
        s.description,
        s.button_text,
        s.button_link,
        s.order_index,
        s.is_active,
        COALESCE(a.cdn_url, a.url, s.image_url) AS image_url
      FROM sliders s
      LEFT JOIN assets a ON s.image_id = a.id
      WHERE s.is_active = TRUE
      ORDER BY s.order_index ASC, s.created_at DESC
      LIMIT 5
Executing (default): SELECT id, title, subtitle, icon_key, icon_color, icon_background, sort_order
      FROM value_props
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT id, customer_name, customer_title, customer_initials, testimonial_text, rating, is_featured, sort_order
      FROM testimonials
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        b.id,
        b.name,
        b.slug,
        b.description,
        COALESCE(a.cdn_url, a.url) AS logo_url
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      WHERE b.is_featured = TRUE
      ORDER BY b.updated_at DESC, b.created_at DESC
      LIMIT 6
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.price,
        p.compare_price,
        p.stock,
        p.published_at,
        COALESCE(a.cdn_url, a.url) AS image_url,
        AVG(pr.rating) AS average_rating,
        COUNT(pr.id) AS review_count
      FROM products p
      LEFT JOIN assets a ON p.thumbnail_id = a.id
      LEFT JOIN product_reviews pr ON pr.product_id = p.id AND pr.status = 'approved'
      WHERE p.status = 'published' AND p.is_best_seller = TRUE
      GROUP BY
        p.id, p.name, p.slug, p.price, p.compare_price, p.stock, p.published_at, a.cdn_url, a.url
      ORDER BY p.published_at DESC NULLS LAST, p.updated_at DESC
      LIMIT 6
Executing (default): SELECT
        c.id,
        c.name,
        c.slug,
        c.description,
        COALESCE(a.cdn_url, a.url) AS image_url
      FROM product_categories c
      LEFT JOIN assets a ON c.image_id = a.id
      WHERE c.is_featured = TRUE
      ORDER BY c.updated_at DESC, c.created_at DESC
      LIMIT 6
Executing (default): SELECT value
        FROM settings
        WHERE namespace = 'homepage_metrics'
        LIMIT 1
Executing (default): SELECT
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        COALESCE(p.read_time, p.content -> 'meta' ->> 'readTime', '') AS read_time,
        p.content -> 'meta' ->> 'category' AS category,
        COALESCE(p.content -> 'meta' ->> 'imageUrl', a.cdn_url, a.url) AS raw_image_url,
        STRING_AGG(DISTINCT t.name, ' & ') FILTER (WHERE t.name IS NOT NULL) AS topic_names,
        p.published_at
      FROM posts p
      LEFT JOIN post_topics pt ON pt.post_id = p.id
      LEFT JOIN topics t ON t.id = pt.topic_id
      LEFT JOIN assets a ON a.id = p.cover_asset_id
      WHERE p.status = 'published'
      GROUP BY
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        p.read_time,
        p.content,
        p.published_at,
        a.cdn_url,
        a.url
      ORDER BY p.published_at DESC NULLS LAST, p.created_at DESC
      LIMIT 4
Executing (default): SELECT 
        ml.*,
        COUNT(mi.id) as item_count
      FROM menu_locations ml
      LEFT JOIN menu_items mi ON ml.id = mi.menu_location_id
      GROUP BY ml.id
      ORDER BY ml.created_at DESC
Executing (default): SELECT id, customer_name, customer_title, customer_initials, testimonial_text, rating, is_featured, sort_order
      FROM testimonials
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        s.id,
        s.title,
        s.description,
        s.button_text,
        s.button_link,
        s.order_index,
        s.is_active,
        COALESCE(a.cdn_url, a.url, s.image_url) AS image_url
      FROM sliders s
      LEFT JOIN assets a ON s.image_id = a.id
      WHERE s.is_active = TRUE
      ORDER BY s.order_index ASC, s.created_at DESC
      LIMIT 5
Executing (default): SELECT
        b.id,
        b.name,
        b.slug,
        b.description,
        COALESCE(a.cdn_url, a.url) AS logo_url
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      WHERE b.is_featured = TRUE
      ORDER BY b.updated_at DESC, b.created_at DESC
      LIMIT 6
Executing (default): SELECT id, title, subtitle, icon_key, icon_color, icon_background, sort_order
      FROM value_props
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.price,
        p.compare_price,
        p.stock,
        p.published_at,
        COALESCE(a.cdn_url, a.url) AS image_url,
        AVG(pr.rating) AS average_rating,
        COUNT(pr.id) AS review_count
      FROM products p
      LEFT JOIN assets a ON p.thumbnail_id = a.id
      LEFT JOIN product_reviews pr ON pr.product_id = p.id AND pr.status = 'approved'
      WHERE p.status = 'published' AND p.is_best_seller = TRUE
      GROUP BY
        p.id, p.name, p.slug, p.price, p.compare_price, p.stock, p.published_at, a.cdn_url, a.url
      ORDER BY p.published_at DESC NULLS LAST, p.updated_at DESC
      LIMIT 6
Executing (default): SELECT value
        FROM settings
        WHERE namespace = 'homepage_metrics'
        LIMIT 1
Executing (default): SELECT 
        ml.*,
        COUNT(mi.id) as item_count
      FROM menu_locations ml
      LEFT JOIN menu_items mi ON ml.id = mi.menu_location_id
      GROUP BY ml.id
      ORDER BY ml.created_at DESC
Executing (default): SELECT
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        COALESCE(p.read_time, p.content -> 'meta' ->> 'readTime', '') AS read_time,
        p.content -> 'meta' ->> 'category' AS category,
        COALESCE(p.content -> 'meta' ->> 'imageUrl', a.cdn_url, a.url) AS raw_image_url,
        STRING_AGG(DISTINCT t.name, ' & ') FILTER (WHERE t.name IS NOT NULL) AS topic_names,
        p.published_at
      FROM posts p
      LEFT JOIN post_topics pt ON pt.post_id = p.id
      LEFT JOIN topics t ON t.id = pt.topic_id
      LEFT JOIN assets a ON a.id = p.cover_asset_id
      WHERE p.status = 'published'
      GROUP BY
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        p.read_time,
        p.content,
        p.published_at,
        a.cdn_url,
        a.url
      ORDER BY p.published_at DESC NULLS LAST, p.created_at DESC
      LIMIT 4
Executing (default): SELECT
        c.id,
        c.name,
        c.slug,
        c.description,
        COALESCE(a.cdn_url, a.url) AS image_url
      FROM product_categories c
      LEFT JOIN assets a ON c.image_id = a.id
      WHERE c.is_featured = TRUE
      ORDER BY c.updated_at DESC, c.created_at DESC
      LIMIT 6
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        s.id,
        s.title,
        s.description,
        s.button_text,
        s.button_link,
        s.order_index,
        s.is_active,
        COALESCE(a.cdn_url, a.url, s.image_url) AS image_url
      FROM sliders s
      LEFT JOIN assets a ON s.image_id = a.id
      WHERE s.is_active = TRUE
      ORDER BY s.order_index ASC, s.created_at DESC
      LIMIT 5
Executing (default): SELECT id, title, subtitle, icon_key, icon_color, icon_background, sort_order
      FROM value_props
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        c.id,
        c.name,
        c.slug,
        c.description,
        COALESCE(a.cdn_url, a.url) AS image_url
      FROM product_categories c
      LEFT JOIN assets a ON c.image_id = a.id
      WHERE c.is_featured = TRUE
      ORDER BY c.updated_at DESC, c.created_at DESC
      LIMIT 6
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.price,
        p.compare_price,
        p.stock,
        p.published_at,
        COALESCE(a.cdn_url, a.url) AS image_url,
        AVG(pr.rating) AS average_rating,
        COUNT(pr.id) AS review_count
      FROM products p
      LEFT JOIN assets a ON p.thumbnail_id = a.id
      LEFT JOIN product_reviews pr ON pr.product_id = p.id AND pr.status = 'approved'
      WHERE p.status = 'published' AND p.is_best_seller = TRUE
      GROUP BY
        p.id, p.name, p.slug, p.price, p.compare_price, p.stock, p.published_at, a.cdn_url, a.url
      ORDER BY p.published_at DESC NULLS LAST, p.updated_at DESC
      LIMIT 6
Executing (default): SELECT value
        FROM settings
        WHERE namespace = 'homepage_metrics'
        LIMIT 1
Executing (default): SELECT
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        COALESCE(p.read_time, p.content -> 'meta' ->> 'readTime', '') AS read_time,
        p.content -> 'meta' ->> 'category' AS category,
        COALESCE(p.content -> 'meta' ->> 'imageUrl', a.cdn_url, a.url) AS raw_image_url,
        STRING_AGG(DISTINCT t.name, ' & ') FILTER (WHERE t.name IS NOT NULL) AS topic_names,
        p.published_at
      FROM posts p
      LEFT JOIN post_topics pt ON pt.post_id = p.id
      LEFT JOIN topics t ON t.id = pt.topic_id
      LEFT JOIN assets a ON a.id = p.cover_asset_id
      WHERE p.status = 'published'
      GROUP BY
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        p.read_time,
        p.content,
        p.published_at,
        a.cdn_url,
        a.url
      ORDER BY p.published_at DESC NULLS LAST, p.created_at DESC
      LIMIT 4
Executing (default): SELECT
        b.id,
        b.name,
        b.slug,
        b.description,
        COALESCE(a.cdn_url, a.url) AS logo_url
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      WHERE b.is_featured = TRUE
      ORDER BY b.updated_at DESC, b.created_at DESC
      LIMIT 6
Executing (default): SELECT id, customer_name, customer_title, customer_initials, testimonial_text, rating, is_featured, sort_order
      FROM testimonials
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        s.id,
        s.title,
        s.description,
        s.button_text,
        s.button_link,
        s.order_index,
        s.is_active,
        COALESCE(a.cdn_url, a.url, s.image_url) AS image_url
      FROM sliders s
      LEFT JOIN assets a ON s.image_id = a.id
      WHERE s.is_active = TRUE
      ORDER BY s.order_index ASC, s.created_at DESC
      LIMIT 5
Executing (default): SELECT 
        ml.*,
        COUNT(mi.id) as item_count
      FROM menu_locations ml
      LEFT JOIN menu_items mi ON ml.id = mi.menu_location_id
      GROUP BY ml.id
      ORDER BY ml.created_at DESC
Executing (default): SELECT id, title, subtitle, icon_key, icon_color, icon_background, sort_order
      FROM value_props
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        c.id,
        c.name,
        c.slug,
        c.description,
        COALESCE(a.cdn_url, a.url) AS image_url
      FROM product_categories c
      LEFT JOIN assets a ON c.image_id = a.id
      WHERE c.is_featured = TRUE
      ORDER BY c.updated_at DESC, c.created_at DESC
      LIMIT 6
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.price,
        p.compare_price,
        p.stock,
        p.published_at,
        COALESCE(a.cdn_url, a.url) AS image_url,
        AVG(pr.rating) AS average_rating,
        COUNT(pr.id) AS review_count
      FROM products p
      LEFT JOIN assets a ON p.thumbnail_id = a.id
      LEFT JOIN product_reviews pr ON pr.product_id = p.id AND pr.status = 'approved'
      WHERE p.status = 'published' AND p.is_best_seller = TRUE
      GROUP BY
        p.id, p.name, p.slug, p.price, p.compare_price, p.stock, p.published_at, a.cdn_url, a.url
      ORDER BY p.published_at DESC NULLS LAST, p.updated_at DESC
      LIMIT 6
Executing (default): SELECT value
        FROM settings
        WHERE namespace = 'homepage_metrics'
        LIMIT 1
Executing (default): SELECT
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        COALESCE(p.read_time, p.content -> 'meta' ->> 'readTime', '') AS read_time,
        p.content -> 'meta' ->> 'category' AS category,
        COALESCE(p.content -> 'meta' ->> 'imageUrl', a.cdn_url, a.url) AS raw_image_url,
        STRING_AGG(DISTINCT t.name, ' & ') FILTER (WHERE t.name IS NOT NULL) AS topic_names,
        p.published_at
      FROM posts p
      LEFT JOIN post_topics pt ON pt.post_id = p.id
      LEFT JOIN topics t ON t.id = pt.topic_id
      LEFT JOIN assets a ON a.id = p.cover_asset_id
      WHERE p.status = 'published'
      GROUP BY
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        p.read_time,
        p.content,
        p.published_at,
        a.cdn_url,
        a.url
      ORDER BY p.published_at DESC NULLS LAST, p.created_at DESC
      LIMIT 4
Executing (default): SELECT
        b.id,
        b.name,
        b.slug,
        b.description,
        COALESCE(a.cdn_url, a.url) AS logo_url
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      WHERE b.is_featured = TRUE
      ORDER BY b.updated_at DESC, b.created_at DESC
      LIMIT 6
Executing (default): SELECT id, customer_name, customer_title, customer_initials, testimonial_text, rating, is_featured, sort_order
      FROM testimonials
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT 
        ml.*,
        COUNT(mi.id) as item_count
      FROM menu_locations ml
      LEFT JOIN menu_items mi ON ml.id = mi.menu_location_id
      GROUP BY ml.id
      ORDER BY ml.created_at DESC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT count(DISTINCT("Post"."id")) AS "count" FROM "posts" AS "Post" LEFT OUTER JOIN "assets" AS "cover_asset" ON "Post"."cover_asset_id" = "cover_asset"."id" LEFT OUTER JOIN ( "post_topics" AS "topics->post_topics" INNER JOIN "topics" AS "topics" ON "topics"."id" = "topics->post_topics"."topic_id") ON "Post"."id" = "topics->post_topics"."post_id" LEFT OUTER JOIN ( "post_tags" AS "tags->post_tags" INNER JOIN "tags" AS "tags" ON "tags"."id" = "tags->post_tags"."tag_id") ON "Post"."id" = "tags->post_tags"."post_id" WHERE "Post"."status" = 'published';
Executing (default): SELECT "Post".*, "cover_asset"."id" AS "cover_asset.id", "cover_asset"."url" AS "cover_asset.url", "cover_asset"."cdn_url" AS "cover_asset.cdn_url", "cover_asset"."format" AS "cover_asset.format", "cover_asset"."width" AS "cover_asset.width", "cover_asset"."height" AS "cover_asset.height", "cover_asset"."sizes" AS "cover_asset.sizes", "topics"."id" AS "topics.id", "topics"."name" AS "topics.name", "tags"."id" AS "tags.id", "tags"."name" AS "tags.name" FROM (SELECT "Post"."id", "Post"."title", "Post"."slug", "Post"."excerpt", "Post"."content", "Post"."cover_asset_id", "Post"."status", "Post"."author_id", "Post"."published_at", "Post"."seo", "Post"."header_code", "Post"."is_featured", "Post"."read_time", "Post"."created_at", "Post"."updated_at" FROM "posts" AS "Post" WHERE "Post"."status" = 'published' ORDER BY "Post"."is_featured" DESC, "Post"."published_at" DESC LIMIT 24 OFFSET 0) AS "Post" LEFT OUTER JOIN "assets" AS "cover_asset" ON "Post"."cover_asset_id" = "cover_asset"."id" LEFT OUTER JOIN ( "post_topics" AS "topics->post_topics" INNER JOIN "topics" AS "topics" ON "topics"."id" = "topics->post_topics"."topic_id") ON "Post"."id" = "topics->post_topics"."post_id" LEFT OUTER JOIN ( "post_tags" AS "tags->post_tags" INNER JOIN "tags" AS "tags" ON "tags"."id" = "tags->post_tags"."tag_id") ON "Post"."id" = "tags->post_tags"."post_id" ORDER BY "Post"."is_featured" DESC, "Post"."published_at" DESC;
Executing (default): SELECT 
        c.id,
        c.name,
        c.slug,
        c.description,
        c.parent_id,
        c.is_featured,
        c.created_at,
        c.updated_at,
        pc.name as parent_name,
        COALESCE(a.cdn_url, a.url) as image_url,
        COUNT(DISTINCT ppc.product_id) AS product_count
      FROM product_categories c
      LEFT JOIN product_categories pc ON c.parent_id = pc.id
      LEFT JOIN assets a ON c.image_id = a.id
      LEFT JOIN product_product_categories ppc ON ppc.category_id = c.id
      LEFT JOIN products p ON p.id = ppc.product_id AND p.status = 'published'
      
      GROUP BY
        c.id,
        c.name,
        c.slug,
        c.description,
        c.parent_id,
        c.is_featured,
        c.created_at,
        c.updated_at,
        pc.name,
        a.cdn_url,
        a.url
      ORDER BY c.name ASC
Executing (default): SELECT 
        c.id,
        c.name,
        c.slug,
        c.description,
        c.parent_id,
        c.is_featured,
        c.created_at,
        c.updated_at,
        pc.name as parent_name,
        COALESCE(a.cdn_url, a.url) as image_url,
        COUNT(DISTINCT ppc.product_id) AS product_count
      FROM product_categories c
      LEFT JOIN product_categories pc ON c.parent_id = pc.id
      LEFT JOIN assets a ON c.image_id = a.id
      LEFT JOIN product_product_categories ppc ON ppc.category_id = c.id
      LEFT JOIN products p ON p.id = ppc.product_id AND p.status = 'published'
      WHERE c.slug = 'cham-soc-da'
      GROUP BY
        c.id,
        c.name,
        c.slug,
        c.description,
        c.parent_id,
        c.is_featured,
        c.created_at,
        c.updated_at,
        pc.name,
        a.cdn_url,
        a.url
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.sku,
        p.description,
        p.price,
        p.compare_price,
        p.stock,
        p.is_featured,
        p.is_best_seller,
        p.created_at,
        p.published_at,
        b.id as brand_id,
        b.name as brand_name,
        b.slug as brand_slug,
        thumb.url as thumbnail_url,
        thumb.cdn_url as thumbnail_cdn_url,
        (
          SELECT COALESCE(
            json_agg(
              jsonb_build_object(
                'id', c.id,
                'name', c.name,
                'slug', c.slug
              )
            ) FILTER (WHERE c.id IS NOT NULL),
            '[]'::json
          )
          FROM product_product_categories ppc
          JOIN product_categories c ON c.id = ppc.category_id
          WHERE ppc.product_id = p.id
        ) AS categories_json,
        (
          SELECT COALESCE(AVG(pr.rating)::numeric, 0)::float
          FROM product_reviews pr
          WHERE pr.product_id = p.id AND pr.status = 'approved'
        ) AS average_rating,
        (
          SELECT COUNT(*)
          FROM product_reviews pr
          WHERE pr.product_id = p.id AND pr.status = 'approved'
        ) AS review_count
      FROM products p
      LEFT JOIN brands b ON b.id = p.brand_id
      LEFT JOIN assets thumb ON thumb.id = p.thumbnail_id
      WHERE p.status = 'published' AND EXISTS (
        SELECT 1
        FROM product_product_categories ppc2
        JOIN product_categories c2 ON c2.id = ppc2.category_id
        WHERE ppc2.product_id = p.id
          AND c2.slug = ANY(string_to_array('cham-soc-da', ','))
      )
      ORDER BY p.is_featured DESC, p.created_at DESC
      LIMIT 60 OFFSET 0
Executing (default): SELECT COUNT(DISTINCT p.id)::int AS total
      FROM products p
      WHERE p.status = 'published' AND EXISTS (
        SELECT 1
        FROM product_product_categories ppc2
        JOIN product_categories c2 ON c2.id = ppc2.category_id
        WHERE ppc2.product_id = p.id
          AND c2.slug = ANY(string_to_array('cham-soc-da', ','))
      )
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.sku,
        p.description,
        p.content,
        p.price,
        p.compare_price,
        p.stock,
        p.is_featured,
        p.is_best_seller,
        p.created_at,
        p.published_at,
        b.id as brand_id,
        b.name as brand_name,
        b.slug as brand_slug,
        thumb.url as thumbnail_url,
        thumb.cdn_url as thumbnail_cdn_url,
        (
          SELECT COALESCE(
            json_agg(
              jsonb_build_object(
                'id', c.id,
                'name', c.name,
                'slug', c.slug
              )
            ) FILTER (WHERE c.id IS NOT NULL),
            '[]'::json
          )
          FROM product_product_categories ppc
          JOIN product_categories c ON c.id = ppc.category_id
          WHERE ppc.product_id = p.id
        ) AS categories_json,
        (
          SELECT COALESCE(AVG(pr.rating)::numeric, 0)::float
          FROM product_reviews pr
          WHERE pr.product_id = p.id AND pr.status = 'approved'
        ) AS average_rating,
        (
          SELECT COUNT(*)
          FROM product_reviews pr
          WHERE pr.product_id = p.id AND pr.status = 'approved'
        ) AS review_count
      FROM products p
      LEFT JOIN brands b ON b.id = p.brand_id
      LEFT JOIN assets thumb ON thumb.id = p.thumbnail_id
      WHERE p.status = 'published'
        AND (p.slug = 'calming-aura-aroma-diffuser-default' OR p.sku = 'calming-aura-aroma-diffuser-default')
      LIMIT 1
Executing (default): SELECT
        pi.id,
        pi.sort_order,
        a.url,
        a.cdn_url,
        a.width,
        a.height,
        a.format
      FROM product_images pi
      JOIN assets a ON a.id = pi.asset_id
      WHERE pi.product_id = '81715826-67ef-44cd-a5b3-ee3e04727277'
      ORDER BY pi.sort_order ASC, pi.created_at ASC
Executing (default): SELECT id, name, value
      FROM product_attributes
      WHERE product_id = '81715826-67ef-44cd-a5b3-ee3e04727277'
      ORDER BY name ASC
Executing (default): SELECT DISTINCT
        rp.id,
        rp.name,
        rp.slug,
        rp.price,
        rp.compare_price,
        rp.stock,
        rp.is_featured,
        rp.is_best_seller,
        rp.created_at,
        thumb.url as thumbnail_url,
        thumb.cdn_url as thumbnail_cdn_url
      FROM products rp
      LEFT JOIN product_product_categories rppc ON rppc.product_id = rp.id
      LEFT JOIN assets thumb ON thumb.id = rp.thumbnail_id
      WHERE rp.id <> '81715826-67ef-44cd-a5b3-ee3e04727277'
        AND rp.status = 'published'
        AND rppc.category_id = ANY(string_to_array('89b26f86-d05b-43e5-86f9-5b72bb94e1a4', ',')::uuid[])
      ORDER BY rp.is_featured DESC, rp.created_at DESC
      LIMIT 8
Executing (default): SELECT
        c.id,
        c.name,
        c.slug,
        c.description,
        COALESCE(a.cdn_url, a.url) AS image_url
      FROM product_categories c
      LEFT JOIN assets a ON c.image_id = a.id
      WHERE c.is_featured = TRUE
      ORDER BY c.updated_at DESC, c.created_at DESC
      LIMIT 6
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.price,
        p.compare_price,
        p.stock,
        p.published_at,
        COALESCE(a.cdn_url, a.url) AS image_url,
        AVG(pr.rating) AS average_rating,
        COUNT(pr.id) AS review_count
      FROM products p
      LEFT JOIN assets a ON p.thumbnail_id = a.id
      LEFT JOIN product_reviews pr ON pr.product_id = p.id AND pr.status = 'approved'
      WHERE p.status = 'published' AND p.is_best_seller = TRUE
      GROUP BY
        p.id, p.name, p.slug, p.price, p.compare_price, p.stock, p.published_at, a.cdn_url, a.url
      ORDER BY p.published_at DESC NULLS LAST, p.updated_at DESC
      LIMIT 6
Executing (default): SELECT
        b.id,
        b.name,
        b.slug,
        b.description,
        COALESCE(a.cdn_url, a.url) AS logo_url
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      WHERE b.is_featured = TRUE
      ORDER BY b.updated_at DESC, b.created_at DESC
      LIMIT 6
Executing (default): SELECT id, title, subtitle, icon_key, icon_color, icon_background, sort_order
      FROM value_props
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        s.id,
        s.title,
        s.description,
        s.button_text,
        s.button_link,
        s.order_index,
        s.is_active,
        COALESCE(a.cdn_url, a.url, s.image_url) AS image_url
      FROM sliders s
      LEFT JOIN assets a ON s.image_id = a.id
      WHERE s.is_active = TRUE
      ORDER BY s.order_index ASC, s.created_at DESC
      LIMIT 5
Executing (default): SELECT id, customer_name, customer_title, customer_initials, testimonial_text, rating, is_featured, sort_order
      FROM testimonials
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        COALESCE(p.read_time, p.content -> 'meta' ->> 'readTime', '') AS read_time,
        p.content -> 'meta' ->> 'category' AS category,
        COALESCE(p.content -> 'meta' ->> 'imageUrl', a.cdn_url, a.url) AS raw_image_url,
        STRING_AGG(DISTINCT t.name, ' & ') FILTER (WHERE t.name IS NOT NULL) AS topic_names,
        p.published_at
      FROM posts p
      LEFT JOIN post_topics pt ON pt.post_id = p.id
      LEFT JOIN topics t ON t.id = pt.topic_id
      LEFT JOIN assets a ON a.id = p.cover_asset_id
      WHERE p.status = 'published'
      GROUP BY
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        p.read_time,
        p.content,
        p.published_at,
        a.cdn_url,
        a.url
      ORDER BY p.published_at DESC NULLS LAST, p.created_at DESC
      LIMIT 4
Executing (default): SELECT value
        FROM settings
        WHERE namespace = 'homepage_metrics'
        LIMIT 1
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        c.id,
        c.name,
        c.slug,
        c.description,
        COALESCE(a.cdn_url, a.url) AS image_url
      FROM product_categories c
      LEFT JOIN assets a ON c.image_id = a.id
      WHERE c.is_featured = TRUE
      ORDER BY c.updated_at DESC, c.created_at DESC
      LIMIT 6
Executing (default): SELECT
        s.id,
        s.title,
        s.description,
        s.button_text,
        s.button_link,
        s.order_index,
        s.is_active,
        COALESCE(a.cdn_url, a.url, s.image_url) AS image_url
      FROM sliders s
      LEFT JOIN assets a ON s.image_id = a.id
      WHERE s.is_active = TRUE
      ORDER BY s.order_index ASC, s.created_at DESC
      LIMIT 5
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.price,
        p.compare_price,
        p.stock,
        p.published_at,
        COALESCE(a.cdn_url, a.url) AS image_url,
        AVG(pr.rating) AS average_rating,
        COUNT(pr.id) AS review_count
      FROM products p
      LEFT JOIN assets a ON p.thumbnail_id = a.id
      LEFT JOIN product_reviews pr ON pr.product_id = p.id AND pr.status = 'approved'
      WHERE p.status = 'published' AND p.is_best_seller = TRUE
      GROUP BY
        p.id, p.name, p.slug, p.price, p.compare_price, p.stock, p.published_at, a.cdn_url, a.url
      ORDER BY p.published_at DESC NULLS LAST, p.updated_at DESC
      LIMIT 6
Executing (default): SELECT id, title, subtitle, icon_key, icon_color, icon_background, sort_order
      FROM value_props
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        b.id,
        b.name,
        b.slug,
        b.description,
        COALESCE(a.cdn_url, a.url) AS logo_url
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      WHERE b.is_featured = TRUE
      ORDER BY b.updated_at DESC, b.created_at DESC
      LIMIT 6
Executing (default): SELECT value
        FROM settings
        WHERE namespace = 'homepage_metrics'
        LIMIT 1
Executing (default): SELECT id, customer_name, customer_title, customer_initials, testimonial_text, rating, is_featured, sort_order
      FROM testimonials
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        COALESCE(p.read_time, p.content -> 'meta' ->> 'readTime', '') AS read_time,
        p.content -> 'meta' ->> 'category' AS category,
        COALESCE(p.content -> 'meta' ->> 'imageUrl', a.cdn_url, a.url) AS raw_image_url,
        STRING_AGG(DISTINCT t.name, ' & ') FILTER (WHERE t.name IS NOT NULL) AS topic_names,
        p.published_at
      FROM posts p
      LEFT JOIN post_topics pt ON pt.post_id = p.id
      LEFT JOIN topics t ON t.id = pt.topic_id
      LEFT JOIN assets a ON a.id = p.cover_asset_id
      WHERE p.status = 'published'
      GROUP BY
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        p.read_time,
        p.content,
        p.published_at,
        a.cdn_url,
        a.url
      ORDER BY p.published_at DESC NULLS LAST, p.created_at DESC
      LIMIT 4
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT 
        b.*,
        COALESCE(a.cdn_url, a.url) as logo_url,
        a.format as logo_format,
        a.width as logo_width,
        a.height as logo_height,
        COUNT(DISTINCT p.id) FILTER (WHERE p.status = 'published') as product_count,
        (
          SELECT c.name 
          FROM products p2
          LEFT JOIN product_product_categories ppc ON ppc.product_id = p2.id
          LEFT JOIN product_categories c ON c.id = ppc.category_id
          WHERE p2.brand_id = b.id AND p2.status = 'published' AND c.id IS NOT NULL
          GROUP BY c.name
          ORDER BY COUNT(DISTINCT p2.id) DESC
          LIMIT 1
        ) as primary_category
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      LEFT JOIN products p ON p.brand_id = b.id
      
      GROUP BY 
        b.id,
        b.name,
        b.slug,
        b.description,
        b.logo_id,
        b.website,
        b.is_featured,
        b.created_at,
        b.updated_at,
        a.cdn_url,
        a.url,
        a.format,
        a.width,
        a.height
      ORDER BY b.name ASC
Executing (default): SELECT 
        b.*,
        COALESCE(a.cdn_url, a.url) as logo_url,
        a.format as logo_format,
        a.width as logo_width,
        a.height as logo_height,
        COUNT(DISTINCT p.id) FILTER (WHERE p.status = 'published') as product_count,
        (
          SELECT c.name 
          FROM products p2
          LEFT JOIN product_product_categories ppc ON ppc.product_id = p2.id
          LEFT JOIN product_categories c ON c.id = ppc.category_id
          WHERE p2.brand_id = b.id AND p2.status = 'published' AND c.id IS NOT NULL
          GROUP BY c.name
          ORDER BY COUNT(DISTINCT p2.id) DESC
          LIMIT 1
        ) as primary_category
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      LEFT JOIN products p ON p.brand_id = b.id
      WHERE b.is_featured = TRUE
      GROUP BY 
        b.id,
        b.name,
        b.slug,
        b.description,
        b.logo_id,
        b.website,
        b.is_featured,
        b.created_at,
        b.updated_at,
        a.cdn_url,
        a.url,
        a.format,
        a.width,
        a.height
      ORDER BY b.name ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT 
        ml.*,
        COUNT(mi.id) as item_count
      FROM menu_locations ml
      LEFT JOIN menu_items mi ON ml.id = mi.menu_location_id
      GROUP BY ml.id
      ORDER BY ml.created_at DESC
Executing (default): SELECT 
        ml.*,
        COUNT(mi.id) as item_count
      FROM menu_locations ml
      LEFT JOIN menu_items mi ON ml.id = mi.menu_location_id
      GROUP BY ml.id
      ORDER BY ml.created_at DESC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT count(DISTINCT("Post"."id")) AS "count" FROM "posts" AS "Post" LEFT OUTER JOIN "assets" AS "cover_asset" ON "Post"."cover_asset_id" = "cover_asset"."id" LEFT OUTER JOIN ( "post_topics" AS "topics->post_topics" INNER JOIN "topics" AS "topics" ON "topics"."id" = "topics->post_topics"."topic_id") ON "Post"."id" = "topics->post_topics"."post_id" LEFT OUTER JOIN ( "post_tags" AS "tags->post_tags" INNER JOIN "tags" AS "tags" ON "tags"."id" = "tags->post_tags"."tag_id") ON "Post"."id" = "tags->post_tags"."post_id" WHERE "Post"."status" = 'published';
Executing (default): SELECT "Post".*, "cover_asset"."id" AS "cover_asset.id", "cover_asset"."url" AS "cover_asset.url", "cover_asset"."cdn_url" AS "cover_asset.cdn_url", "cover_asset"."format" AS "cover_asset.format", "cover_asset"."width" AS "cover_asset.width", "cover_asset"."height" AS "cover_asset.height", "cover_asset"."sizes" AS "cover_asset.sizes", "topics"."id" AS "topics.id", "topics"."name" AS "topics.name", "tags"."id" AS "tags.id", "tags"."name" AS "tags.name" FROM (SELECT "Post"."id", "Post"."title", "Post"."slug", "Post"."excerpt", "Post"."content", "Post"."cover_asset_id", "Post"."status", "Post"."author_id", "Post"."published_at", "Post"."seo", "Post"."header_code", "Post"."is_featured", "Post"."read_time", "Post"."created_at", "Post"."updated_at" FROM "posts" AS "Post" WHERE "Post"."status" = 'published' ORDER BY "Post"."is_featured" DESC, "Post"."published_at" DESC LIMIT 24 OFFSET 0) AS "Post" LEFT OUTER JOIN "assets" AS "cover_asset" ON "Post"."cover_asset_id" = "cover_asset"."id" LEFT OUTER JOIN ( "post_topics" AS "topics->post_topics" INNER JOIN "topics" AS "topics" ON "topics"."id" = "topics->post_topics"."topic_id") ON "Post"."id" = "topics->post_topics"."post_id" LEFT OUTER JOIN ( "post_tags" AS "tags->post_tags" INNER JOIN "tags" AS "tags" ON "tags"."id" = "tags->post_tags"."tag_id") ON "Post"."id" = "tags->post_tags"."post_id" ORDER BY "Post"."is_featured" DESC, "Post"."published_at" DESC;
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT 
        b.*,
        COALESCE(a.cdn_url, a.url) as logo_url,
        a.format as logo_format,
        a.width as logo_width,
        a.height as logo_height,
        COUNT(DISTINCT p.id) FILTER (WHERE p.status = 'published') as product_count,
        (
          SELECT c.name 
          FROM products p2
          LEFT JOIN product_product_categories ppc ON ppc.product_id = p2.id
          LEFT JOIN product_categories c ON c.id = ppc.category_id
          WHERE p2.brand_id = b.id AND p2.status = 'published' AND c.id IS NOT NULL
          GROUP BY c.name
          ORDER BY COUNT(DISTINCT p2.id) DESC
          LIMIT 1
        ) as primary_category
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      LEFT JOIN products p ON p.brand_id = b.id
      
      GROUP BY 
        b.id,
        b.name,
        b.slug,
        b.description,
        b.logo_id,
        b.website,
        b.is_featured,
        b.created_at,
        b.updated_at,
        a.cdn_url,
        a.url,
        a.format,
        a.width,
        a.height
      ORDER BY b.name ASC
Executing (default): SELECT 
        b.*,
        COALESCE(a.cdn_url, a.url) as logo_url,
        a.format as logo_format,
        a.width as logo_width,
        a.height as logo_height,
        COUNT(DISTINCT p.id) FILTER (WHERE p.status = 'published') as product_count,
        (
          SELECT c.name 
          FROM products p2
          LEFT JOIN product_product_categories ppc ON ppc.product_id = p2.id
          LEFT JOIN product_categories c ON c.id = ppc.category_id
          WHERE p2.brand_id = b.id AND p2.status = 'published' AND c.id IS NOT NULL
          GROUP BY c.name
          ORDER BY COUNT(DISTINCT p2.id) DESC
          LIMIT 1
        ) as primary_category
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      LEFT JOIN products p ON p.brand_id = b.id
      WHERE b.is_featured = TRUE
      GROUP BY 
        b.id,
        b.name,
        b.slug,
        b.description,
        b.logo_id,
        b.website,
        b.is_featured,
        b.created_at,
        b.updated_at,
        a.cdn_url,
        a.url,
        a.format,
        a.width,
        a.height
      ORDER BY b.name ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT 
        ml.*,
        COUNT(mi.id) as item_count
      FROM menu_locations ml
      LEFT JOIN menu_items mi ON ml.id = mi.menu_location_id
      GROUP BY ml.id
      ORDER BY ml.created_at DESC
Executing (default): SELECT 
        ml.*,
        COUNT(mi.id) as item_count
      FROM menu_locations ml
      LEFT JOIN menu_items mi ON ml.id = mi.menu_location_id
      GROUP BY ml.id
      ORDER BY ml.created_at DESC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT count(DISTINCT("Post"."id")) AS "count" FROM "posts" AS "Post" LEFT OUTER JOIN "assets" AS "cover_asset" ON "Post"."cover_asset_id" = "cover_asset"."id" LEFT OUTER JOIN ( "post_topics" AS "topics->post_topics" INNER JOIN "topics" AS "topics" ON "topics"."id" = "topics->post_topics"."topic_id") ON "Post"."id" = "topics->post_topics"."post_id" LEFT OUTER JOIN ( "post_tags" AS "tags->post_tags" INNER JOIN "tags" AS "tags" ON "tags"."id" = "tags->post_tags"."tag_id") ON "Post"."id" = "tags->post_tags"."post_id" WHERE "Post"."status" = 'published';
Executing (default): SELECT "Post".*, "cover_asset"."id" AS "cover_asset.id", "cover_asset"."url" AS "cover_asset.url", "cover_asset"."cdn_url" AS "cover_asset.cdn_url", "cover_asset"."format" AS "cover_asset.format", "cover_asset"."width" AS "cover_asset.width", "cover_asset"."height" AS "cover_asset.height", "cover_asset"."sizes" AS "cover_asset.sizes", "topics"."id" AS "topics.id", "topics"."name" AS "topics.name", "tags"."id" AS "tags.id", "tags"."name" AS "tags.name" FROM (SELECT "Post"."id", "Post"."title", "Post"."slug", "Post"."excerpt", "Post"."content", "Post"."cover_asset_id", "Post"."status", "Post"."author_id", "Post"."published_at", "Post"."seo", "Post"."header_code", "Post"."is_featured", "Post"."read_time", "Post"."created_at", "Post"."updated_at" FROM "posts" AS "Post" WHERE "Post"."status" = 'published' ORDER BY "Post"."is_featured" DESC, "Post"."published_at" DESC LIMIT 24 OFFSET 0) AS "Post" LEFT OUTER JOIN "assets" AS "cover_asset" ON "Post"."cover_asset_id" = "cover_asset"."id" LEFT OUTER JOIN ( "post_topics" AS "topics->post_topics" INNER JOIN "topics" AS "topics" ON "topics"."id" = "topics->post_topics"."topic_id") ON "Post"."id" = "topics->post_topics"."post_id" LEFT OUTER JOIN ( "post_tags" AS "tags->post_tags" INNER JOIN "tags" AS "tags" ON "tags"."id" = "tags->post_tags"."tag_id") ON "Post"."id" = "tags->post_tags"."post_id" ORDER BY "Post"."is_featured" DESC, "Post"."published_at" DESC;
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT count(DISTINCT("Post"."id")) AS "count" FROM "posts" AS "Post" LEFT OUTER JOIN "assets" AS "cover_asset" ON "Post"."cover_asset_id" = "cover_asset"."id" LEFT OUTER JOIN ( "post_topics" AS "topics->post_topics" INNER JOIN "topics" AS "topics" ON "topics"."id" = "topics->post_topics"."topic_id") ON "Post"."id" = "topics->post_topics"."post_id" LEFT OUTER JOIN ( "post_tags" AS "tags->post_tags" INNER JOIN "tags" AS "tags" ON "tags"."id" = "tags->post_tags"."tag_id") ON "Post"."id" = "tags->post_tags"."post_id" WHERE "Post"."status" = 'published';
Executing (default): SELECT "Post".*, "cover_asset"."id" AS "cover_asset.id", "cover_asset"."url" AS "cover_asset.url", "cover_asset"."cdn_url" AS "cover_asset.cdn_url", "cover_asset"."format" AS "cover_asset.format", "cover_asset"."width" AS "cover_asset.width", "cover_asset"."height" AS "cover_asset.height", "cover_asset"."sizes" AS "cover_asset.sizes", "topics"."id" AS "topics.id", "topics"."name" AS "topics.name", "tags"."id" AS "tags.id", "tags"."name" AS "tags.name" FROM (SELECT "Post"."id", "Post"."title", "Post"."slug", "Post"."excerpt", "Post"."content", "Post"."cover_asset_id", "Post"."status", "Post"."author_id", "Post"."published_at", "Post"."seo", "Post"."header_code", "Post"."is_featured", "Post"."read_time", "Post"."created_at", "Post"."updated_at" FROM "posts" AS "Post" WHERE "Post"."status" = 'published' ORDER BY "Post"."is_featured" DESC, "Post"."published_at" DESC LIMIT 24 OFFSET 0) AS "Post" LEFT OUTER JOIN "assets" AS "cover_asset" ON "Post"."cover_asset_id" = "cover_asset"."id" LEFT OUTER JOIN ( "post_topics" AS "topics->post_topics" INNER JOIN "topics" AS "topics" ON "topics"."id" = "topics->post_topics"."topic_id") ON "Post"."id" = "topics->post_topics"."post_id" LEFT OUTER JOIN ( "post_tags" AS "tags->post_tags" INNER JOIN "tags" AS "tags" ON "tags"."id" = "tags->post_tags"."tag_id") ON "Post"."id" = "tags->post_tags"."post_id" ORDER BY "Post"."is_featured" DESC, "Post"."published_at" DESC;
Executing (default): SELECT 
        ml.*,
        COUNT(mi.id) as item_count
      FROM menu_locations ml
      LEFT JOIN menu_items mi ON ml.id = mi.menu_location_id
      GROUP BY ml.id
      ORDER BY ml.created_at DESC
Executing (default): SELECT 
        ml.*,
        COUNT(mi.id) as item_count
      FROM menu_locations ml
      LEFT JOIN menu_items mi ON ml.id = mi.menu_location_id
      GROUP BY ml.id
      ORDER BY ml.created_at DESC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        s.id,
        s.title,
        s.description,
        s.button_text,
        s.button_link,
        s.order_index,
        s.is_active,
        COALESCE(a.cdn_url, a.url, s.image_url) AS image_url
      FROM sliders s
      LEFT JOIN assets a ON s.image_id = a.id
      WHERE s.is_active = TRUE
      ORDER BY s.order_index ASC, s.created_at DESC
      LIMIT 5
Executing (default): SELECT id, title, subtitle, icon_key, icon_color, icon_background, sort_order
      FROM value_props
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        c.id,
        c.name,
        c.slug,
        c.description,
        COALESCE(a.cdn_url, a.url) AS image_url
      FROM product_categories c
      LEFT JOIN assets a ON c.image_id = a.id
      WHERE c.is_featured = TRUE
      ORDER BY c.updated_at DESC, c.created_at DESC
      LIMIT 6
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.price,
        p.compare_price,
        p.stock,
        p.published_at,
        COALESCE(a.cdn_url, a.url) AS image_url,
        AVG(pr.rating) AS average_rating,
        COUNT(pr.id) AS review_count
      FROM products p
      LEFT JOIN assets a ON p.thumbnail_id = a.id
      LEFT JOIN product_reviews pr ON pr.product_id = p.id AND pr.status = 'approved'
      WHERE p.status = 'published' AND p.is_best_seller = TRUE
      GROUP BY
        p.id, p.name, p.slug, p.price, p.compare_price, p.stock, p.published_at, a.cdn_url, a.url
      ORDER BY p.published_at DESC NULLS LAST, p.updated_at DESC
      LIMIT 6
Executing (default): SELECT
        b.id,
        b.name,
        b.slug,
        b.description,
        COALESCE(a.cdn_url, a.url) AS logo_url
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      WHERE b.is_featured = TRUE
      ORDER BY b.updated_at DESC, b.created_at DESC
      LIMIT 6
Executing (default): SELECT id, customer_name, customer_title, customer_initials, testimonial_text, rating, is_featured, sort_order
      FROM testimonials
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT value
        FROM settings
        WHERE namespace = 'homepage_metrics'
        LIMIT 1
Executing (default): SELECT
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        COALESCE(p.read_time, p.content -> 'meta' ->> 'readTime', '') AS read_time,
        p.content -> 'meta' ->> 'category' AS category,
        COALESCE(p.content -> 'meta' ->> 'imageUrl', a.cdn_url, a.url) AS raw_image_url,
        STRING_AGG(DISTINCT t.name, ' & ') FILTER (WHERE t.name IS NOT NULL) AS topic_names,
        p.published_at
      FROM posts p
      LEFT JOIN post_topics pt ON pt.post_id = p.id
      LEFT JOIN topics t ON t.id = pt.topic_id
      LEFT JOIN assets a ON a.id = p.cover_asset_id
      WHERE p.status = 'published'
      GROUP BY
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        p.read_time,
        p.content,
        p.published_at,
        a.cdn_url,
        a.url
      ORDER BY p.published_at DESC NULLS LAST, p.created_at DESC
      LIMIT 4
Executing (default): SELECT
        s.id,
        s.title,
        s.description,
        s.button_text,
        s.button_link,
        s.order_index,
        s.is_active,
        COALESCE(a.cdn_url, a.url, s.image_url) AS image_url
      FROM sliders s
      LEFT JOIN assets a ON s.image_id = a.id
      WHERE s.is_active = TRUE
      ORDER BY s.order_index ASC, s.created_at DESC
      LIMIT 5
Executing (default): SELECT id, title, subtitle, icon_key, icon_color, icon_background, sort_order
      FROM value_props
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        c.id,
        c.name,
        c.slug,
        c.description,
        COALESCE(a.cdn_url, a.url) AS image_url
      FROM product_categories c
      LEFT JOIN assets a ON c.image_id = a.id
      WHERE c.is_featured = TRUE
      ORDER BY c.updated_at DESC, c.created_at DESC
      LIMIT 6
Executing (default): SELECT
        b.id,
        b.name,
        b.slug,
        b.description,
        COALESCE(a.cdn_url, a.url) AS logo_url
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      WHERE b.is_featured = TRUE
      ORDER BY b.updated_at DESC, b.created_at DESC
      LIMIT 6
Executing (default): SELECT id, customer_name, customer_title, customer_initials, testimonial_text, rating, is_featured, sort_order
      FROM testimonials
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT value
        FROM settings
        WHERE namespace = 'homepage_metrics'
        LIMIT 1
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.price,
        p.compare_price,
        p.stock,
        p.published_at,
        COALESCE(a.cdn_url, a.url) AS image_url,
        AVG(pr.rating) AS average_rating,
        COUNT(pr.id) AS review_count
      FROM products p
      LEFT JOIN assets a ON p.thumbnail_id = a.id
      LEFT JOIN product_reviews pr ON pr.product_id = p.id AND pr.status = 'approved'
      WHERE p.status = 'published' AND p.is_best_seller = TRUE
      GROUP BY
        p.id, p.name, p.slug, p.price, p.compare_price, p.stock, p.published_at, a.cdn_url, a.url
      ORDER BY p.published_at DESC NULLS LAST, p.updated_at DESC
      LIMIT 6
Executing (default): SELECT
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        COALESCE(p.read_time, p.content -> 'meta' ->> 'readTime', '') AS read_time,
        p.content -> 'meta' ->> 'category' AS category,
        COALESCE(p.content -> 'meta' ->> 'imageUrl', a.cdn_url, a.url) AS raw_image_url,
        STRING_AGG(DISTINCT t.name, ' & ') FILTER (WHERE t.name IS NOT NULL) AS topic_names,
        p.published_at
      FROM posts p
      LEFT JOIN post_topics pt ON pt.post_id = p.id
      LEFT JOIN topics t ON t.id = pt.topic_id
      LEFT JOIN assets a ON a.id = p.cover_asset_id
      WHERE p.status = 'published'
      GROUP BY
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        p.read_time,
        p.content,
        p.published_at,
        a.cdn_url,
        a.url
      ORDER BY p.published_at DESC NULLS LAST, p.created_at DESC
      LIMIT 4
Executing (default): SELECT count(DISTINCT("Post"."id")) AS "count" FROM "posts" AS "Post" LEFT OUTER JOIN "assets" AS "cover_asset" ON "Post"."cover_asset_id" = "cover_asset"."id" LEFT OUTER JOIN ( "post_topics" AS "topics->post_topics" INNER JOIN "topics" AS "topics" ON "topics"."id" = "topics->post_topics"."topic_id") ON "Post"."id" = "topics->post_topics"."post_id" LEFT OUTER JOIN ( "post_tags" AS "tags->post_tags" INNER JOIN "tags" AS "tags" ON "tags"."id" = "tags->post_tags"."tag_id") ON "Post"."id" = "tags->post_tags"."post_id" WHERE "Post"."status" = 'published';
Executing (default): SELECT "Post".*, "cover_asset"."id" AS "cover_asset.id", "cover_asset"."url" AS "cover_asset.url", "cover_asset"."cdn_url" AS "cover_asset.cdn_url", "cover_asset"."format" AS "cover_asset.format", "cover_asset"."width" AS "cover_asset.width", "cover_asset"."height" AS "cover_asset.height", "cover_asset"."sizes" AS "cover_asset.sizes", "topics"."id" AS "topics.id", "topics"."name" AS "topics.name", "tags"."id" AS "tags.id", "tags"."name" AS "tags.name" FROM (SELECT "Post"."id", "Post"."title", "Post"."slug", "Post"."excerpt", "Post"."content", "Post"."cover_asset_id", "Post"."status", "Post"."author_id", "Post"."published_at", "Post"."seo", "Post"."header_code", "Post"."is_featured", "Post"."read_time", "Post"."created_at", "Post"."updated_at" FROM "posts" AS "Post" WHERE "Post"."status" = 'published' ORDER BY "Post"."is_featured" DESC, "Post"."published_at" DESC LIMIT 24 OFFSET 0) AS "Post" LEFT OUTER JOIN "assets" AS "cover_asset" ON "Post"."cover_asset_id" = "cover_asset"."id" LEFT OUTER JOIN ( "post_topics" AS "topics->post_topics" INNER JOIN "topics" AS "topics" ON "topics"."id" = "topics->post_topics"."topic_id") ON "Post"."id" = "topics->post_topics"."post_id" LEFT OUTER JOIN ( "post_tags" AS "tags->post_tags" INNER JOIN "tags" AS "tags" ON "tags"."id" = "tags->post_tags"."tag_id") ON "Post"."id" = "tags->post_tags"."post_id" ORDER BY "Post"."is_featured" DESC, "Post"."published_at" DESC;
Executing (default): SELECT 
        b.*,
        COALESCE(a.cdn_url, a.url) as logo_url,
        a.format as logo_format,
        a.width as logo_width,
        a.height as logo_height,
        COUNT(DISTINCT p.id) FILTER (WHERE p.status = 'published') as product_count,
        (
          SELECT c.name 
          FROM products p2
          LEFT JOIN product_product_categories ppc ON ppc.product_id = p2.id
          LEFT JOIN product_categories c ON c.id = ppc.category_id
          WHERE p2.brand_id = b.id AND p2.status = 'published' AND c.id IS NOT NULL
          GROUP BY c.name
          ORDER BY COUNT(DISTINCT p2.id) DESC
          LIMIT 1
        ) as primary_category
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      LEFT JOIN products p ON p.brand_id = b.id
      
      GROUP BY 
        b.id,
        b.name,
        b.slug,
        b.description,
        b.logo_id,
        b.website,
        b.is_featured,
        b.created_at,
        b.updated_at,
        a.cdn_url,
        a.url,
        a.format,
        a.width,
        a.height
      ORDER BY b.name ASC
Executing (default): SELECT 
        b.*,
        COALESCE(a.cdn_url, a.url) as logo_url,
        a.format as logo_format,
        a.width as logo_width,
        a.height as logo_height,
        COUNT(DISTINCT p.id) FILTER (WHERE p.status = 'published') as product_count,
        (
          SELECT c.name 
          FROM products p2
          LEFT JOIN product_product_categories ppc ON ppc.product_id = p2.id
          LEFT JOIN product_categories c ON c.id = ppc.category_id
          WHERE p2.brand_id = b.id AND p2.status = 'published' AND c.id IS NOT NULL
          GROUP BY c.name
          ORDER BY COUNT(DISTINCT p2.id) DESC
          LIMIT 1
        ) as primary_category
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      LEFT JOIN products p ON p.brand_id = b.id
      WHERE b.is_featured = TRUE
      GROUP BY 
        b.id,
        b.name,
        b.slug,
        b.description,
        b.logo_id,
        b.website,
        b.is_featured,
        b.created_at,
        b.updated_at,
        a.cdn_url,
        a.url,
        a.format,
        a.width,
        a.height
      ORDER BY b.name ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT 
        b.*,
        COALESCE(a.cdn_url, a.url) as logo_url,
        a.format as logo_format,
        a.width as logo_width,
        a.height as logo_height,
        COUNT(DISTINCT p.id) FILTER (WHERE p.status = 'published') as product_count,
        (
          SELECT c.name 
          FROM products p2
          LEFT JOIN product_product_categories ppc ON ppc.product_id = p2.id
          LEFT JOIN product_categories c ON c.id = ppc.category_id
          WHERE p2.brand_id = b.id AND p2.status = 'published' AND c.id IS NOT NULL
          GROUP BY c.name
          ORDER BY COUNT(DISTINCT p2.id) DESC
          LIMIT 1
        ) as primary_category
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      LEFT JOIN products p ON p.brand_id = b.id
      
      GROUP BY 
        b.id,
        b.name,
        b.slug,
        b.description,
        b.logo_id,
        b.website,
        b.is_featured,
        b.created_at,
        b.updated_at,
        a.cdn_url,
        a.url,
        a.format,
        a.width,
        a.height
      ORDER BY b.name ASC
Executing (default): SELECT 
        b.*,
        COALESCE(a.cdn_url, a.url) as logo_url,
        a.format as logo_format,
        a.width as logo_width,
        a.height as logo_height,
        COUNT(DISTINCT p.id) FILTER (WHERE p.status = 'published') as product_count,
        (
          SELECT c.name 
          FROM products p2
          LEFT JOIN product_product_categories ppc ON ppc.product_id = p2.id
          LEFT JOIN product_categories c ON c.id = ppc.category_id
          WHERE p2.brand_id = b.id AND p2.status = 'published' AND c.id IS NOT NULL
          GROUP BY c.name
          ORDER BY COUNT(DISTINCT p2.id) DESC
          LIMIT 1
        ) as primary_category
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      LEFT JOIN products p ON p.brand_id = b.id
      WHERE b.is_featured = TRUE
      GROUP BY 
        b.id,
        b.name,
        b.slug,
        b.description,
        b.logo_id,
        b.website,
        b.is_featured,
        b.created_at,
        b.updated_at,
        a.cdn_url,
        a.url,
        a.format,
        a.width,
        a.height
      ORDER BY b.name ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.sku,
        p.description,
        p.price,
        p.compare_price,
        p.stock,
        p.is_featured,
        p.is_best_seller,
        p.created_at,
        p.published_at,
        b.id as brand_id,
        b.name as brand_name,
        b.slug as brand_slug,
        thumb.url as thumbnail_url,
        thumb.cdn_url as thumbnail_cdn_url,
        (
          SELECT COALESCE(
            json_agg(
              jsonb_build_object(
                'id', c.id,
                'name', c.name,
                'slug', c.slug
              )
            ) FILTER (WHERE c.id IS NOT NULL),
            '[]'::json
          )
          FROM product_product_categories ppc
          JOIN product_categories c ON c.id = ppc.category_id
          WHERE ppc.product_id = p.id
        ) AS categories_json,
        (
          SELECT COALESCE(AVG(pr.rating)::numeric, 0)::float
          FROM product_reviews pr
          WHERE pr.product_id = p.id AND pr.status = 'approved'
        ) AS average_rating,
        (
          SELECT COUNT(*)
          FROM product_reviews pr
          WHERE pr.product_id = p.id AND pr.status = 'approved'
        ) AS review_count
      FROM products p
      LEFT JOIN brands b ON b.id = p.brand_id
      LEFT JOIN assets thumb ON thumb.id = p.thumbnail_id
      WHERE p.status = 'published' AND ((p.compare_price IS NOT NULL AND p.compare_price > p.price))
      ORDER BY p.is_featured DESC, p.created_at DESC
      LIMIT 8 OFFSET 0
Executing (default): SELECT COUNT(DISTINCT p.id)::int AS total
      FROM products p
      WHERE p.status = 'published' AND ((p.compare_price IS NOT NULL AND p.compare_price > p.price))
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.sku,
        p.description,
        p.price,
        p.compare_price,
        p.stock,
        p.is_featured,
        p.is_best_seller,
        p.created_at,
        p.published_at,
        b.id as brand_id,
        b.name as brand_name,
        b.slug as brand_slug,
        thumb.url as thumbnail_url,
        thumb.cdn_url as thumbnail_cdn_url,
        (
          SELECT COALESCE(
            json_agg(
              jsonb_build_object(
                'id', c.id,
                'name', c.name,
                'slug', c.slug
              )
            ) FILTER (WHERE c.id IS NOT NULL),
            '[]'::json
          )
          FROM product_product_categories ppc
          JOIN product_categories c ON c.id = ppc.category_id
          WHERE ppc.product_id = p.id
        ) AS categories_json,
        (
          SELECT COALESCE(AVG(pr.rating)::numeric, 0)::float
          FROM product_reviews pr
          WHERE pr.product_id = p.id AND pr.status = 'approved'
        ) AS average_rating,
        (
          SELECT COUNT(*)
          FROM product_reviews pr
          WHERE pr.product_id = p.id AND pr.status = 'approved'
        ) AS review_count
      FROM products p
      LEFT JOIN brands b ON b.id = p.brand_id
      LEFT JOIN assets thumb ON thumb.id = p.thumbnail_id
      WHERE p.status = 'published' AND ((p.compare_price IS NOT NULL AND p.compare_price > p.price))
      ORDER BY p.is_featured DESC, p.created_at DESC
      LIMIT 8 OFFSET 0
Executing (default): SELECT COUNT(DISTINCT p.id)::int AS total
      FROM products p
      WHERE p.status = 'published' AND ((p.compare_price IS NOT NULL AND p.compare_price > p.price))
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.sku,
        p.description,
        p.price,
        p.compare_price,
        p.stock,
        p.is_featured,
        p.is_best_seller,
        p.created_at,
        p.published_at,
        b.id as brand_id,
        b.name as brand_name,
        b.slug as brand_slug,
        thumb.url as thumbnail_url,
        thumb.cdn_url as thumbnail_cdn_url,
        (
          SELECT COALESCE(
            json_agg(
              jsonb_build_object(
                'id', c.id,
                'name', c.name,
                'slug', c.slug
              )
            ) FILTER (WHERE c.id IS NOT NULL),
            '[]'::json
          )
          FROM product_product_categories ppc
          JOIN product_categories c ON c.id = ppc.category_id
          WHERE ppc.product_id = p.id
        ) AS categories_json,
        (
          SELECT COALESCE(AVG(pr.rating)::numeric, 0)::float
          FROM product_reviews pr
          WHERE pr.product_id = p.id AND pr.status = 'approved'
        ) AS average_rating,
        (
          SELECT COUNT(*)
          FROM product_reviews pr
          WHERE pr.product_id = p.id AND pr.status = 'approved'
        ) AS review_count
      FROM products p
      LEFT JOIN brands b ON b.id = p.brand_id
      LEFT JOIN assets thumb ON thumb.id = p.thumbnail_id
      WHERE p.status = 'published' AND ((p.compare_price IS NOT NULL AND p.compare_price > p.price))
      ORDER BY p.is_featured DESC, p.created_at DESC
      LIMIT 8 OFFSET 0
Executing (default): SELECT COUNT(DISTINCT p.id)::int AS total
      FROM products p
      WHERE p.status = 'published' AND ((p.compare_price IS NOT NULL AND p.compare_price > p.price))
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.sku,
        p.description,
        p.price,
        p.compare_price,
        p.stock,
        p.is_featured,
        p.is_best_seller,
        p.created_at,
        p.published_at,
        b.id as brand_id,
        b.name as brand_name,
        b.slug as brand_slug,
        thumb.url as thumbnail_url,
        thumb.cdn_url as thumbnail_cdn_url,
        (
          SELECT COALESCE(
            json_agg(
              jsonb_build_object(
                'id', c.id,
                'name', c.name,
                'slug', c.slug
              )
            ) FILTER (WHERE c.id IS NOT NULL),
            '[]'::json
          )
          FROM product_product_categories ppc
          JOIN product_categories c ON c.id = ppc.category_id
          WHERE ppc.product_id = p.id
        ) AS categories_json,
        (
          SELECT COALESCE(AVG(pr.rating)::numeric, 0)::float
          FROM product_reviews pr
          WHERE pr.product_id = p.id AND pr.status = 'approved'
        ) AS average_rating,
        (
          SELECT COUNT(*)
          FROM product_reviews pr
          WHERE pr.product_id = p.id AND pr.status = 'approved'
        ) AS review_count
      FROM products p
      LEFT JOIN brands b ON b.id = p.brand_id
      LEFT JOIN assets thumb ON thumb.id = p.thumbnail_id
      WHERE p.status = 'published' AND ((p.compare_price IS NOT NULL AND p.compare_price > p.price))
      ORDER BY p.is_featured DESC, p.created_at DESC
      LIMIT 8 OFFSET 0
Executing (default): SELECT COUNT(DISTINCT p.id)::int AS total
      FROM products p
      WHERE p.status = 'published' AND ((p.compare_price IS NOT NULL AND p.compare_price > p.price))
Executing (default): SELECT count(DISTINCT("Post"."id")) AS "count" FROM "posts" AS "Post" LEFT OUTER JOIN "assets" AS "cover_asset" ON "Post"."cover_asset_id" = "cover_asset"."id" LEFT OUTER JOIN ( "post_topics" AS "topics->post_topics" INNER JOIN "topics" AS "topics" ON "topics"."id" = "topics->post_topics"."topic_id") ON "Post"."id" = "topics->post_topics"."post_id" LEFT OUTER JOIN ( "post_tags" AS "tags->post_tags" INNER JOIN "tags" AS "tags" ON "tags"."id" = "tags->post_tags"."tag_id") ON "Post"."id" = "tags->post_tags"."post_id" WHERE "Post"."status" = 'published';
Executing (default): SELECT "Post".*, "cover_asset"."id" AS "cover_asset.id", "cover_asset"."url" AS "cover_asset.url", "cover_asset"."cdn_url" AS "cover_asset.cdn_url", "cover_asset"."format" AS "cover_asset.format", "cover_asset"."width" AS "cover_asset.width", "cover_asset"."height" AS "cover_asset.height", "cover_asset"."sizes" AS "cover_asset.sizes", "topics"."id" AS "topics.id", "topics"."name" AS "topics.name", "tags"."id" AS "tags.id", "tags"."name" AS "tags.name" FROM (SELECT "Post"."id", "Post"."title", "Post"."slug", "Post"."excerpt", "Post"."content", "Post"."cover_asset_id", "Post"."status", "Post"."author_id", "Post"."published_at", "Post"."seo", "Post"."header_code", "Post"."is_featured", "Post"."read_time", "Post"."created_at", "Post"."updated_at" FROM "posts" AS "Post" WHERE "Post"."status" = 'published' ORDER BY "Post"."is_featured" DESC, "Post"."published_at" DESC LIMIT 24 OFFSET 0) AS "Post" LEFT OUTER JOIN "assets" AS "cover_asset" ON "Post"."cover_asset_id" = "cover_asset"."id" LEFT OUTER JOIN ( "post_topics" AS "topics->post_topics" INNER JOIN "topics" AS "topics" ON "topics"."id" = "topics->post_topics"."topic_id") ON "Post"."id" = "topics->post_topics"."post_id" LEFT OUTER JOIN ( "post_tags" AS "tags->post_tags" INNER JOIN "tags" AS "tags" ON "tags"."id" = "tags->post_tags"."tag_id") ON "Post"."id" = "tags->post_tags"."post_id" ORDER BY "Post"."is_featured" DESC, "Post"."published_at" DESC;
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT * FROM menu_items
      WHERE menu_location_id = '5c7bfd25-dce5-48c8-9446-18c6f235e62f'
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        s.id,
        s.title,
        s.description,
        s.button_text,
        s.button_link,
        s.order_index,
        s.is_active,
        COALESCE(a.cdn_url, a.url, s.image_url) AS image_url
      FROM sliders s
      LEFT JOIN assets a ON s.image_id = a.id
      WHERE s.is_active = TRUE
      ORDER BY s.order_index ASC, s.created_at DESC
      LIMIT 5
Executing (default): SELECT
        c.id,
        c.name,
        c.slug,
        c.description,
        COALESCE(a.cdn_url, a.url) AS image_url
      FROM product_categories c
      LEFT JOIN assets a ON c.image_id = a.id
      WHERE c.is_featured = TRUE
      ORDER BY c.updated_at DESC, c.created_at DESC
      LIMIT 6
Executing (default): SELECT id, title, subtitle, icon_key, icon_color, icon_background, sort_order
      FROM value_props
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        b.id,
        b.name,
        b.slug,
        b.description,
        COALESCE(a.cdn_url, a.url) AS logo_url
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      WHERE b.is_featured = TRUE
      ORDER BY b.updated_at DESC, b.created_at DESC
      LIMIT 6
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.price,
        p.compare_price,
        p.stock,
        p.published_at,
        COALESCE(a.cdn_url, a.url) AS image_url,
        AVG(pr.rating) AS average_rating,
        COUNT(pr.id) AS review_count
      FROM products p
      LEFT JOIN assets a ON p.thumbnail_id = a.id
      LEFT JOIN product_reviews pr ON pr.product_id = p.id AND pr.status = 'approved'
      WHERE p.status = 'published' AND p.is_best_seller = TRUE
      GROUP BY
        p.id, p.name, p.slug, p.price, p.compare_price, p.stock, p.published_at, a.cdn_url, a.url
      ORDER BY p.published_at DESC NULLS LAST, p.updated_at DESC
      LIMIT 6
Executing (default): SELECT value
        FROM settings
        WHERE namespace = 'homepage_metrics'
        LIMIT 1
Executing (default): SELECT
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        COALESCE(p.read_time, p.content -> 'meta' ->> 'readTime', '') AS read_time,
        p.content -> 'meta' ->> 'category' AS category,
        COALESCE(p.content -> 'meta' ->> 'imageUrl', a.cdn_url, a.url) AS raw_image_url,
        STRING_AGG(DISTINCT t.name, ' & ') FILTER (WHERE t.name IS NOT NULL) AS topic_names,
        p.published_at
      FROM posts p
      LEFT JOIN post_topics pt ON pt.post_id = p.id
      LEFT JOIN topics t ON t.id = pt.topic_id
      LEFT JOIN assets a ON a.id = p.cover_asset_id
      WHERE p.status = 'published'
      GROUP BY
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        p.read_time,
        p.content,
        p.published_at,
        a.cdn_url,
        a.url
      ORDER BY p.published_at DESC NULLS LAST, p.created_at DESC
      LIMIT 4
Executing (default): SELECT id, customer_name, customer_title, customer_initials, testimonial_text, rating, is_featured, sort_order
      FROM testimonials
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        s.id,
        s.title,
        s.description,
        s.button_text,
        s.button_link,
        s.order_index,
        s.is_active,
        COALESCE(a.cdn_url, a.url, s.image_url) AS image_url
      FROM sliders s
      LEFT JOIN assets a ON s.image_id = a.id
      WHERE s.is_active = TRUE
      ORDER BY s.order_index ASC, s.created_at DESC
      LIMIT 5
Executing (default): SELECT
        c.id,
        c.name,
        c.slug,
        c.description,
        COALESCE(a.cdn_url, a.url) AS image_url
      FROM product_categories c
      LEFT JOIN assets a ON c.image_id = a.id
      WHERE c.is_featured = TRUE
      ORDER BY c.updated_at DESC, c.created_at DESC
      LIMIT 6
Executing (default): SELECT id, title, subtitle, icon_key, icon_color, icon_background, sort_order
      FROM value_props
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        b.id,
        b.name,
        b.slug,
        b.description,
        COALESCE(a.cdn_url, a.url) AS logo_url
      FROM brands b
      LEFT JOIN assets a ON b.logo_id = a.id
      WHERE b.is_featured = TRUE
      ORDER BY b.updated_at DESC, b.created_at DESC
      LIMIT 6
Executing (default): SELECT value
        FROM settings
        WHERE namespace = 'homepage_metrics'
        LIMIT 1
Executing (default): SELECT id, customer_name, customer_title, customer_initials, testimonial_text, rating, is_featured, sort_order
      FROM testimonials
      WHERE is_active = TRUE
      ORDER BY sort_order ASC, created_at ASC
Executing (default): SELECT
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        COALESCE(p.read_time, p.content -> 'meta' ->> 'readTime', '') AS read_time,
        p.content -> 'meta' ->> 'category' AS category,
        COALESCE(p.content -> 'meta' ->> 'imageUrl', a.cdn_url, a.url) AS raw_image_url,
        STRING_AGG(DISTINCT t.name, ' & ') FILTER (WHERE t.name IS NOT NULL) AS topic_names,
        p.published_at
      FROM posts p
      LEFT JOIN post_topics pt ON pt.post_id = p.id
      LEFT JOIN topics t ON t.id = pt.topic_id
      LEFT JOIN assets a ON a.id = p.cover_asset_id
      WHERE p.status = 'published'
      GROUP BY
        p.id,
        p.title,
        p.slug,
        p.excerpt,
        p.read_time,
        p.content,
        p.published_at,
        a.cdn_url,
        a.url
      ORDER BY p.published_at DESC NULLS LAST, p.created_at DESC
      LIMIT 4
Executing (default): SELECT
        p.id,
        p.name,
        p.slug,
        p.price,
        p.compare_price,
        p.stock,
        p.published_at,
        COALESCE(a.cdn_url, a.url) AS image_url,
        AVG(pr.rating) AS average_rating,
        COUNT(pr.id) AS review_count
      FROM products p
      LEFT JOIN assets a ON p.thumbnail_id = a.id
      LEFT JOIN product_reviews pr ON pr.product_id = p.id AND pr.status = 'approved'
      WHERE p.status = 'published' AND p.is_best_seller = TRUE
      GROUP BY
        p.id, p.name, p.slug, p.price, p.compare_price, p.stock, p.published_at, a.cdn_url, a.url
      ORDER BY p.published_at DESC NULLS LAST, p.updated_at DESC
      LIMIT 6
